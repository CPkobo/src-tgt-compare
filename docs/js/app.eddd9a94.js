(function(){"use strict";var t={7264:function(t,e,n){var s=n(9242),i=n(3396),o=n(4870),r=n(2578),l=n(7327);n(7658);class a{constructor(t=null,e="",n="",s=!0,i="A2B"){(0,l.Z)(this,"isjunk",void 0),(0,l.Z)(this,"a",void 0),(0,l.Z)(this,"b",void 0),(0,l.Z)(this,"autojunk",void 0),(0,l.Z)(this,"matchingBlocks",void 0),(0,l.Z)(this,"opcodes",void 0),(0,l.Z)(this,"opIsA2B",void 0),(0,l.Z)(this,"fullbcount",void 0),(0,l.Z)(this,"b2j",void 0),(0,l.Z)(this,"bjunk",void 0),(0,l.Z)(this,"bpopular",void 0),this.isjunk=t,this.a="",this.b="",this.autojunk=s,this.matchingBlocks=[],this.opcodes=[],this.opIsA2B="A2B"===i,this.fullbcount={},this.b2j={},this.bjunk=[],this.bpopular=[],this.setSeqs(e,n)}setDefaultDirection(t="A2B"){"A2B"===t?this.opIsA2B=!0:"B2A"===t&&(this.opIsA2B=!1)}calculate_ratio(t,e){return e>0?2*t/e:1}range(t,e=0){let n=0,s=0;0===e?s=t:(n=t,s=e);const i=[];for(let o=n;o<s;o++)i.push(o);return i}setSeqs(t,e){this.setSeq1(t),this.setSeq2(e)}setSeq1(t){t!==this.a&&(this.a=t,this.matchingBlocks=[],this.opcodes=[])}setSeq2(t){t!==this.b&&(this.b=t,this.matchingBlocks=[],this.opcodes=[],this.fullbcount={},this._chainB())}_chainB(){const t=this.b;this.b2j={};for(let s=0;s<t.length;s++){const e=t[s];void 0===this.b2j[e]?this.b2j[e]=[s]:this.b2j[e].push(s)}this.bjunk=[];const e=this.isjunk;if(e){for(const t of Object.keys(this.b2j))e(t)&&-1===this.bjunk.indexOf(t)&&this.bjunk.push(t);for(const t of Object.keys(this.bjunk))delete this.b2j[t]}const n=t.length;if(this.bpopular.length=0,this.autojunk&&n>=200){const t=n;for(const e of Object.keys(this.b2j)){const n=this.b2j[e];n.length>t&&-1===this.bpopular.indexOf(e)&&this.bpopular.push(e)}for(const e of this.bpopular)delete this.b2j[e]}}findLongestMatch(t,e,n,s){const i=this.a,o=this.b;let r=t,l=n,a=0,c={};for(const h of this.range(t,e)){const t={},e=i[h],o=this.b2j[e]||[];for(const i of o){if(i<n)continue;if(i>=s)break;const e=c[i-1]?c[i-1]+1:1;t[i]=e,e>a&&(r=h-e+1,l=i-e+1,a=e)}c=t}while(r>t&&l>n&&-1!==this.bjunk.indexOf(o[l-1])&&i[r-1]==o[l-1])r--,l--,a++;while(r+a<e&&l+a<s&&-1!==this.bjunk.indexOf(o[l+a])&&i[r+a]===o[l+a])a++;while(r>t&&l>n&&-1!==this.bjunk.indexOf(o[l-1])&&i[r-1]===o[l-1])r--,l--,a++;while(r+a<e&&l+a<s&&-1!==this.bjunk.indexOf(o[l+a])&&i[r+a]==o[l+a])a++;return[r,l,a]}getMatchingBlocks(){if(this.matchingBlocks.length>0)return this.matchingBlocks;{const t=this.a.length,e=this.b.length,n=[[0,t,0,e]],s=[];while(n.length>0){const t=n.pop()||[0,0,0,0],e=t[0],i=t[1],o=t[2],r=t[3],l=this.findLongestMatch(e,i,o,r),a=l[0],c=l[1],h=l[2];h>0&&(s.push(l),e<a&&o<c&&n.push([e,a,o,c]),a+h<i&&c+h<r&&n.push([a+h,i,c+h,r]))}s.sort(((t,e)=>t[0]>e[0]?1:t[0]<e[0]?-1:0));let i=0,o=0,r=0;const l=[];for(const a of s){const t=a[0],e=a[1],n=a[2];i+r===t&&o+r===e?r+=n:(r>0&&l.push([i,o,r]),i=t,o=e,r=n)}return r>0&&l.push([i,o,r]),l.push([t,e,0]),this.matchingBlocks=l,this.matchingBlocks}}getOpcodes(t){const e=void 0===t?this.opIsA2B:t;return e?this.getOpcodesA2B():this.getOpcodesB2A()}getOpcodesA2B(){if(this.opcodes.length>0&&this.opIsA2B)return this.opcodes;{let t=0,e=0;const n=[];for(const s of this.getMatchingBlocks()){let i="";const o=s[0],r=s[1],l=s[2];t<o&&e<r?i="replace":t<o?i="delete":e<r&&(i="insert"),""!==i&&n.push([i,t,o,e,r]),t=o+l,e=r+l,l>0&&n.push(["equal",o,t,r,e])}return this.opcodes=n,n}}getOpcodesB2A(){if(this.opcodes.length>0&&!this.opIsA2B)return this.opcodes;{let t=0,e=0;const n=[];for(const s of this.getMatchingBlocks()){let i="";const o=s[0],r=s[1],l=s[2];t<o&&e<r?i="replace":t<o?i="insert":e<r&&(i="delete"),""!==i&&n.push([i,e,r,t,o]),t=o+l,e=r+l,l>0&&n.push(["equal",r,e,o,t])}return this.opcodes=n,n}}getGroupedOpcodes(t=3){let e,n,s,i,o,r=this.getOpcodes();0===r.length&&(r=[["equal",0,1,0,1]]),"equal"===r[0][0]&&(e=r[0][0],n=r[0][1],s=r[0][2],i=r[0][3],o=r[0][4],r[0]=[e,Math.max(n,s-t),s,Math.max(i,o-t),o]);const l=r.length-1;"equal"===r[l][0]&&(e=r[l][0],n=r[l][1],s=r[l][2],i=r[l][3],o=r[l][4],r[l]=[e,n,Math.min(s,n+t),i,Math.min(o,i+t)]);const a=t+t,c=[];let h=[];for(const u of r)e=u[0],n=u[1],s=u[2],i=u[3],o=u[4],"equal"===e&&s-n>a&&(h.push([e,n,Math.min(s,n+t),i,Math.min(o,i+t)]),c.push(h.slice()),h=[],n=Math.max(n,s-t),i=Math.max(i,o-t)),h.push([e,n,s,i,o]);return h.length>0&&(1!==h.length||"equal"!==h[0][0])&&c.push(h),c}ratio(){let t=0;for(const e of this.getMatchingBlocks())t+=e[2];return this.calculate_ratio(t,this.a.length+this.b.length)}quickRatio(){if(0===Object.keys(this.fullbcount).length)for(let n=0;n<this.b.length;n++){const t=this.b[n];void 0===this.fullbcount[t]?this.fullbcount[t]=1:this.fullbcount[t]++}const t={};let e=0;for(let n=0;n<this.a.length;n++){const s=this.a[n],i=t[s]||this.fullbcount[s]||0;t[s]=i-1,i>0&&e++}return this.calculate_ratio(e,this.a.length+this.b.length)}realQuickRatio(){const t=this.a.length,e=this.b.length;return this.calculate_ratio(Math.min(t,e),t+e)}applyOpcodes(t=!0){if(""===this.a||""===this.b)return"";const e=t?this.a:this.b;let n=t?this.b:this.a;const s=this.getOpcodes(t).reverse();for(const i of s)switch(i[0]){case"equal":break;case"delete":n=n.slice(0,i[3])+"<ins>"+e.slice(i[1],i[2])+"</ins>"+n.slice(i[4]);break;case"replace":n=n.slice(0,i[3])+"<ins>"+e.slice(i[1],i[2])+"</ins><del>"+n.slice(i[3],i[4])+"</del>"+n.slice(i[4]);break;case"insert":n=n.slice(0,i[3])+"<del>"+n.slice(i[3],i[4])+"</del>"+n.slice(i[4]);break;default:break}return n}}const c='\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>SOURCE TARGET DIFF</title>\n    <style>\n        select {\n            display: block;\n            margin: 5px auto;\n            padding: 5px\n        }\n\n        .compare-result {\n            display: flex;\n            padding: 10px;\n        }\n\n        .compare-result>p {\n            width: 50%;\n            border: 1px solid #999;\n            padding: 10px;\n        }\n\n        .is-old ins {\n            display: none;\n        }\n\n        .is-old del {\n            text-decoration: none;\n        }\n\n        .is-mark-old ins {\n            display: none;\n        }\n\n        .is-mark-old del {\n            color: red;\n        }\n\n        .is-mark-compare ins {\n            color: dodgerblue\n        }\n\n        .is-mark-compare del {\n            color: red;\n            font-size: 0.9em;\n        }\n\n        .is-mark-new ins {\n            color: dodgerblue\n        }\n\n        .is-mark-new del {\n            display: none;\n        }\n\n        .is-new ins {\n            text-decoration: none;\n        }\n\n        .is-new del {\n            display: none;\n        }\n\n        footer {\n            border-top: dashed gray;\n            text-align: center;\n            font-size: 0.8em;\n        }\n    </style>\n</head>\n\n<body>\n    <select id="view-switch" onchange="change(this)">\n        <option value="is-old">OLD</option>\n        <option value="is-mark-old">MARK OLD</option>\n        <option value="is-mark-compare" selected>MARK COMPARE</option>\n        <option value="is-mark-new">MARK NEW</option>\n        <option value="is-new">NEW</option>\n    </select>\n\n    <div id="result-block" class="is-mark-compare">\n        <div class="compare-result">\n            <p>\n                \x3c!-- SOURCE --\x3e\n            </p>\n            <p>\n                \x3c!-- TARGET --\x3e\n            </p>\n        </div>\n    </div>\n\n    <footer>\n        <p>This result file is created by <a href="https://cpkobo.github.io/src-tgt-compare/" target="_blank">this\n                site.</a></p>\n        <p>Pleass access <a href="https://github.com/CPkobo/src-tgt-compare" target="_blank">github repository</a> to\n            get the source cord or feedback.</p>\n    </footer>\n\n    <script>\n        const change = (obj) => {\n            const idx = obj.selectedIndex;\n            const value = obj.options[idx].value;\n            const blk = document.getElementById("result-block")\n            const crtCls = blk.className\n            blk.classList.remove(crtCls)\n            blk.classList.add(value)\n        }\n    <\/script>\n</body>\n</html>\n',h=new a,u={srcOld:"This is the old source text",srcNew:"This is the new source text",tgtOld:"This is the old target text",tgtNew:"This is the new target text",srcDiff:"",tgtDiff:"",sm:h,hasResult:!1},d=(0,r.Q_)("data",{state:()=>u,actions:{execDiff(){this.sm.setSeqs(this.srcOld,this.srcNew),this.srcDiff=this.sm.applyOpcodes(!1),this.sm.setSeqs(this.tgtOld,this.tgtNew),this.tgtDiff=this.sm.applyOpcodes(!1),this.hasResult=!0},createHtml(){!1===this.hasResult&&this.execDiff();const t=c.replace("\x3c!-- SOURCE --\x3e",this.srcDiff).replace("\x3c!-- TARGET --\x3e",this.tgtDiff);return t}}});var p=(0,i.aZ)({__name:"TextSet",props:{isSrc:{type:Boolean},isOld:{type:Boolean}},setup(t){const e=t,n=d(),s=(0,r.Jk)(n),{srcOld:l,srcNew:a,tgtOld:c,tgtNew:h}=s,u=e.isSrc?e.isOld?l:a:e.isOld?c:h;return(t,e)=>{const n=(0,i.up)("a-textarea");return(0,i.wg)(),(0,i.j4)(n,{modelValue:(0,o.SU)(u),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,o.dq)(u)?u.value=t:null),"auto-size":{minRows:5}},null,8,["modelValue"])}}});const f=p;var g=f;const m={class:"compare-sub"};var b=(0,i.aZ)({__name:"SideHalf",props:{isSrc:{type:Boolean}},setup(t){return(e,n)=>{const s=(0,i.up)("a-divider");return(0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)(s,{orientation:"center"},{default:(0,i.w5)((()=>[(0,i.Uk)("OLD")])),_:1}),(0,i.Wm)(g,{"is-src":t.isSrc,"is-old":!0},null,8,["is-src"]),(0,i.Wm)(s,{orientation:"center"},{default:(0,i.w5)((()=>[(0,i.Uk)("NEW")])),_:1}),(0,i.Wm)(g,{"is-src":t.isSrc,"is-old":!1},null,8,["is-src"])])}}});const w=b;var v=w;const k={id:"compare-main"};var O=(0,i.aZ)({__name:"CompareSection",setup(t){const e=(0,o.iH)("result"),n=d(),s=()=>{n.execDiff()},r=()=>{const t=n.createHtml(),s=new Blob([t],{type:"text/html"}),i=document.createElement("a");i.download=`${e.value}.html`,i.href=window.URL.createObjectURL(s),i.target="_blank",i.click(),URL.revokeObjectURL(i.href)};return(t,n)=>{const o=(0,i.up)("a-typography-title"),l=(0,i.up)("a-split"),a=(0,i.up)("a-button"),c=(0,i.up)("a-divider"),h=(0,i.up)("a-input"),u=(0,i.up)("a-space");return(0,i.wg)(),(0,i.iD)("div",k,[(0,i.Wm)(l,null,{first:(0,i.w5)((()=>[(0,i.Wm)(o,{heading:2},{default:(0,i.w5)((()=>[(0,i.Uk)("SOURCE")])),_:1}),(0,i.Wm)(v,{"is-src":!0})])),second:(0,i.w5)((()=>[(0,i.Wm)(o,{heading:2},{default:(0,i.w5)((()=>[(0,i.Uk)("TARGET")])),_:1}),(0,i.Wm)(v,{"is-src":!1})])),_:1}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(a,{type:"primary",onClick:s},{default:(0,i.w5)((()=>[(0,i.Uk)("CHECK DIFF")])),_:1}),(0,i.Wm)(c,{direction:"vertical"}),(0,i.Wm)(h,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=t=>e.value=t)},null,8,["modelValue"]),(0,i.Wm)(a,{type:"primary",onClick:r},{default:(0,i.w5)((()=>[(0,i.Uk)("DOWNLOAD")])),_:1})])),_:1})])}}});const _=O;var j=_;const x={id:"compare-result"},y=["innerHTML"],B=["innerHTML"];var W=(0,i.aZ)({__name:"ResultSection",setup(t){const e=d();return(t,n)=>{const s=(0,i.up)("a-split");return(0,i.wg)(),(0,i.iD)("div",x,[(0,i.Wm)(s,null,{first:(0,i.w5)((()=>[(0,i._)("div",{innerHTML:(0,o.SU)(e).srcDiff},null,8,y)])),second:(0,i.w5)((()=>[(0,i._)("div",{innerHTML:(0,o.SU)(e).tgtDiff},null,8,B)])),_:1})])}}});const A=W;var S=A,D=(0,i.aZ)({__name:"AppBlock",setup(t){const e=d();return(t,n)=>((0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(j),(0,o.SU)(e).hasResult?((0,i.wg)(),(0,i.j4)(S,{key:0})):(0,i.kq)("",!0)]))}});const T=D;var R=T;const M=(0,i._)("a",{href:"https://px.a8.net/svt/ejp?a8mat=3H7J8K+FA4P56+47L8+661TT",rel:"nofollow"},[(0,i._)("img",{border:"0",width:"160",height:"600",alt:"",src:"https://www25.a8.net/svt/bgt?aid=210303524924&wid=008&eno=01&mid=s00000019646001036000&mc=1"})],-1),U=(0,i._)("img",{border:"0",width:"1",height:"1",src:"https://www16.a8.net/0.gif?a8mat=3H7J8K+FA4P56+47L8+661TT",alt:""},null,-1),E=(0,i._)("p",null,"【広告】",-1),Z=[M,U,E];function q(t,e){return(0,i.wg)(),(0,i.iD)("div",null,Z)}var C=n(89);const L={},N=(0,C.Z)(L,[["render",q]]);var I=N;const H=(0,i._)("a",{href:"https://px.a8.net/svt/ejp?a8mat=3NCQW4+9Q3142+2SIW+6KESX",rel:"nofollow"},[(0,i._)("img",{border:"0",width:"160",height:"600",alt:"",src:"https://www23.a8.net/svt/bgt?aid=220624420588&wid=007&eno=01&mid=s00000013028001103000&mc=1"})],-1),F=(0,i._)("img",{border:"0",width:"1",height:"1",src:"https://www18.a8.net/0.gif?a8mat=3NCQW4+9Q3142+2SIW+6KESX",alt:""},null,-1),P=(0,i._)("p",null,"【広告】",-1),K=[H,F,P];function Q(t,e){return(0,i.wg)(),(0,i.iD)("div",null,K)}const V={},G=(0,C.Z)(V,[["render",Q]]);var z=G;function J(t,e){const n=(0,i.up)("a-typography-text"),s=(0,i.up)("icon-github"),o=(0,i.up)("a-link"),r=(0,i.up)("a-space");return(0,i.wg)(),(0,i.j4)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Uk)("ひつじの翻訳室")])),_:1}),(0,i.Wm)(o,{href:"https://github.com/CPkobo/src-tgt-compare"},{default:(0,i.w5)((()=>[(0,i.Wm)(s),(0,i.Uk)("REPOSITORY")])),_:1})])),_:1})}const X={},Y=(0,C.Z)(X,[["render",J]]);var $=Y,tt=(0,i.aZ)({__name:"App",setup(t){return(t,e)=>{const n=(0,i.up)("a-layout-sider"),s=(0,i.up)("a-layout-content"),o=(0,i.up)("a-layout"),r=(0,i.up)("a-layout-footer");return(0,i.wg)(),(0,i.j4)(o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I)])),_:1}),(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Wm)(R)])),_:1}),(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)(z)])),_:1})])),_:1}),(0,i.Wm)(r,{style:{"margin-top":"50px",padding:"1rem"}},{default:(0,i.w5)((()=>[(0,i.Wm)($)])),_:1})])),_:1})}}});const et=tt;var nt=et,st=n(5431);(0,st.z)("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var it=n(4423),ot=n(8914);n(9072);const rt=(0,r.WB)();(0,s.ri)(nt).use(it.Z).use(ot.Z).use(rt).mount("#app")}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,s,i,o){if(!s){var r=1/0;for(h=0;h<t.length;h++){s=t[h][0],i=t[h][1],o=t[h][2];for(var l=!0,a=0;a<s.length;a++)(!1&o||r>=o)&&Object.keys(n.O).every((function(t){return n.O[t](s[a])}))?s.splice(a--,1):(l=!1,o<r&&(r=o));if(l){t.splice(h--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[s,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,o,r=s[0],l=s[1],a=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var h=a(n)}for(e&&e(s);c<r.length;c++)o=r[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(h)},s=self["webpackChunksrc_tgt_compare"]=self["webpackChunksrc_tgt_compare"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(7264)}));s=n.O(s)})();
//# sourceMappingURL=app.eddd9a94.js.map